<!DOCTYPE html><HTML>
    <HEAD>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>MyBox宏命令</title>
        <style type="text/css">
            table {
                max-width:95%;
                margin : 10px;
                border-style: solid;
                border-width:2px;
                border-collapse: collapse;
            }
            th, td {
                border-style: solid;
                border-width:1px;
                padding: 8px;
                border-collapse: collapse;
            }
            th {
                font-weight:bold;
                text-align:center;
            }
            tr {
                height: 1.2em;
            }
            .center {
                text-align:center;
                max-width:95%;
            }
            .valueBox {
                border-style: solid;
                border-width:1px;
                border-color:black;
                padding: 5px;
                border-radius:5px;
            }
            .boldText {
                font-weight:bold;
            }
            .valueText {
                color:#2e598a;
            }

        </style>
    </HEAD>
    <body style="width: 900px; margin:0 auto;" contenteditable="false">
        <h1  align="center">MyBox宏命令</h1>
        <h2>1 宏命令的用途</h2>
        <p>“宏命令”指用命令行来执行操作，指令及其参数均在命令行里给定，而不是由用户在交互式界面中输入或选择。</p>
        <h2>2 执行宏命令</h2>
        <p>宏命令可以按以下方式来执行：</p>
        <ol>
            <li>不启动MyBox图形界面，执行操作并输出结果。<br />
                例如，在系统的命令行窗口中，执行：<br />
                <code>java -jar .\MyBox.jar  image sharp algorithm=four color=keep edge=copy inputFile='D:\MyBox测试\图片\v1.png' outputFile='D:\临时\2\v1_sharp_4neighborg_keep_copy.png'</code><br />
                MyBox宏命令可以成为用户shell脚本的一部分，也有利于批处理。<br /><br />
            </li>
            <li>在MyBox图形界面下，执行操作并显示结果。<br />
                例如，在MyBox的宏命令管理窗口中，执行：<br />
                <code> image sharp algorithm=mask color=grey edge=zero inputFile='D:\MyBox测试\图片\v1.png' outputFile='D:\临时\2\v1_sharp_mask_grey_zero.png'</code><br />
                MyBox按树形管理宏命令，并提供示例，包含了MyBox大多数功能的重要参数组合。
            </li>
        </ol>
        <h2>3 宏命令的格式</h2>
        <p>MyBox宏命令的如下：</p>
        <p align="center">功能名 操作名 参数1 参数2 ... 参数n</p>
        <ul>
            <li>即：宏命令由空格分割的字符串组成，其中第一个字符串是功能名，第二个字符串是操作名，其它字符串是多个参数。</li>
            <li>参数可以是“参数名=参数值”、或是单纯的参数值。</li>
            <li>若参数值包含空格，则它应该被双引号或单引号围起来。</li>
            <li>若参数有缺省值，则可以省略。</li>
            <li>功能名、操作名、参数名均是预定义的，如果查不到则是非法宏。</li>
            <li>功能名、操作名、参数名均为大小写不敏感，有的参数值也大小写不敏感。</li>
        </ul>
        <h2>4 通用参数</h2>
        <table>
            <thead>
                <tr>
                    <th>参数名</th>
                    <th>参数值</th>
                    <th>缺省值</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>inputFile</td>
                    <td>文件的完整路径</td>
                    <td>MyBox示例文件</td>
                    <td>要处理的文件<br />
                        若不定义此参数，则引用MyBox的示例文件。
                    </td>
                </tr>
                <tr>
                    <td>outputFile</td>
                    <td>文件的完整路径</td>
                    <td>MyBox临时文件</td>
                    <td>要生成的文件。<br />
                        若不定义此参数，则用MyBox缺省方式打开生成的对象。
                </tr>
                <tr>
                    <td>openResult</td>
                    <td>true：打开结果<br />
                        false：不打开结果
                    </td>
                    <td>命令行执行宏命令时，缺省值为false<br />
                        图形化执行宏命令时，缺省值为true
                    </td>
                    <td>是否打开结果</td>
                </tr>
            </tbody>
        </table>
        <h2>5 图像处理（image）</h2>
        <p>图像处理的“功能名”均是“image”，以下只介绍操作名及其参数。</p>

        <h3>5.1 编辑（edit）</h3>
        <p>操作名是“edit”，有效参数是“inputFile”，参数“outputFile”无效。</p>
        <p>引用示例图像：</p>
        <code>image edit</code><br />
        <p>参数示例：</p>
        <code>image edit inputFile='D:\MyBox测试\图片\v1.png'</code><br />



        <h3>5.1 换色（replace）</h3>
        <p>操作名是“replace”，参数：</p>
        <table>
            <thead>
                <tr>
                    <th>参数名</th>
                    <th>参数值</th>
                    <th>缺省值</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>color</td>
                    <td><a href="https://openjfx.io/javadoc/24/javafx.graphics/javafx/scene/paint/Color.html" target=_blank>颜色的web值</a><br />
                        如“#0000FF”、“hsla(270,100%,100%,1.0)”</td>
                    <td></td>
                    <td>被匹配的颜色</td>
                </tr>
                <tr>
                    <td>newColor</td>
                    <td><a href="https://openjfx.io/javadoc/24/javafx.graphics/javafx/scene/paint/Color.html" target=_blank>颜色的web值</a><br />
                        如“0x0000FF”、“rgba(0,0,255,1.0)”</td>
                    <td></td>
                    <td>被替换成的新颜色</td>
                </tr>
                <tr>
                    <td>invert</td>
                    <td>true：反选<br />
                        false：正选
                    </td>
                    <td>false</td>
                    <td>是否反选颜色</td>
                </tr>
                <tr>
                    <td>trans</td>
                    <td>true：处理<br />
                        false：不处理
                    </td>
                    <td>false</td>
                    <td>是否处理透明像素</td>
                </tr>
                <tr>
                    <td>algorithm</td>
                    <td>RGBRoughWeightedEuclidean：RGB简单加权欧几里得<br />
                        RGBWeightedEuclidean：RGB加权欧几里得<br />
                        RGBEuclidean：RGB欧几里得<br />
                        Red：红色<br />
                        Green：绿色<br />
                        Blue：蓝色<br />
                        Hue：色相<br />
                        Saturation：饱和度<br />
                        Brightness：亮度<br />
                        RGBManhattan：RGB曼哈顿<br />
                        CIE76: LUV色彩空间<br />
                        CIEDE2000: 色差公式<br />
                        CIE94: 色差公式<br />
                        HSBEuclidean: HSB欧几里得<br />
                        CMC: 色差公式
                    <td>RGBRoughWeightedEuclidean</td>
                    <td>匹配颜色的算法</td>
                </tr>
                <tr>
                    <td>threshold</td>
                    <td>浮点数</td>
                    <td>各算法的缺省阈值</td>
                    <td>匹配颜色的阈值</td>
                </tr>
                <tr>
                    <td>hueWeight</td>
                    <td>浮点数</td>
                    <td>各算法的缺省权重</td>
                    <td>色相权重。只对以下算法有效：CIEDE2000、CIE94、HSBEuclidean、CMC</td>
                </tr>
                <tr>
                    <td>brightnessWeight</td>
                    <td>浮点数</td>
                    <td>各算法的缺省权重</td>
                    <td>亮度权重。只对以下算法有效：CIEDE2000、CIE94、HSBEuclidean、CMC</td>
                </tr>
                <tr>
                    <td>saturationWeight</td>
                    <td>浮点数</td>
                    <td>各算法的缺省权重</td>
                    <td>饱和度权重。只对以下算法有效：CIEDE2000、CIE94、HSBEuclidean、CMC</td>
                </tr>
                <tr>
                    <td>hue</td>
                    <td>true：替换色相<br />
                        false：不替换色相
                    </td>
                    <td>true</td>
                    <td>是否替换色相</td>
                </tr>
                <tr>
                    <td>brightness</td>
                    <td>true：替换亮度<br />
                        false：不替换亮度
                    </td>
                    <td>false</td>
                    <td>是否替换亮度</td>
                </tr>
                <tr>
                    <td>saturation</td>
                    <td>true：替换饱和度<br />
                        false：不替换饱和度
                    </td>
                    <td>false</td>
                    <td>是否替换饱和度</td>
                </tr>


            </tbody>
        </table>
        <p>引用示例图像：</p>
        <code>image replace color=0x0000FF newColor=0x7777FF  outputFile='D:\临时\2\v1_replace_example.png'</code><br />
        <p>参数示例：</p>
        <code>image replace color=0x0000FF newColor=0x7777FF  algorithm=CMC threshold=6 inputFile='D:\MyBox测试\图片\v1.png' outputFile='D:\临时\2\v1_replace_cmc_w6.png'</code><br />

        <h3>5.1 锐化（sharp）</h3>
        <p>操作名是“sharp”，参数：</p>
        <table>
            <thead>
                <tr>
                    <th>参数名</th>
                    <th>参数值</th>
                    <th>缺省值</th>
                    <th>说明</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>algorithm</td>
                    <td>four：四邻域拉普拉斯<br />
                        eight：八邻域拉普拉斯<br />
                        mask：反锐化掩码
                    </td>
                    <td>mask</td>
                    <td>锐化的算法</td>
                </tr>
                <tr>
                    <td>color</td>
                    <td>keep：保持<br />
                        grey：灰色<br />
                        blackwhite：黑白色
                    </td>
                    <td>keep</td>
                    <td>对颜色的转换</td>
                </tr>
                <tr>
                    <td>edge</td>
                    <td>copy：复制<br />
                        zero：填零<br />
                    </td>
                    <td>copy</td>
                    <td>对边缘像素的处理</td>
                </tr>
                <tr>
                    <td>intensity</td>
                    <td>整数，建议小于5</td>
                    <td>2</td>
                    <td>卷积半径。只对算法“反锐化掩码”有效。</td>
                </tr>
            </tbody>
        </table>
        <p>引用示例图像：</p>
        <code>image sharp  outputFile='D:\临时\2\v1_sharp_example.png'</code><br />
        <p>参数示例：</p>
        <code>image sharp algorithm=eight color=blackwhite edge=zero inputFile='D:\MyBox测试\图片\v1.png' outputFile='D:\临时\2\v1_sharp_8neighborg_bw_zero.png'</code><br />

        <br />
    </body>
</HTML>